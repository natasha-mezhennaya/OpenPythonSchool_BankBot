import telebotimport configimport menuimport cardbot = telebot.TeleBot(config.TOKEN)user_payment = {}class Payment:    def __init__(self, telegram_id, payment_type):        self.telegram_id = telegram_id        self.payment_type = payment_type        self.payment_detail = ''        self.payment_sum = 0.0@bot.message_handler(commands=['start'])def start_handler(message):    msg = 'Привет'    msg_out = bot.send_message(message.chat.id, msg)        menu.main_menu(bot, message.chat.id)        @bot.message_handler(content_types=['text'])def text_handler(message):    if message.text == 'Новая карта':        new_card = card.new_card(message.chat.id)        msg = f"Карта успешно создана \n Номер карты: {new_card['card_num']}"        msg_out = bot.send_message(message.chat.id, msg)    elif message.text == 'Мои карты':        cards = card.get_cards(message.chat.id)        msg = ''        for item in cards.items():            msg += f"{item[0]} \nОстаток: {item[1]['amount']} {item[1]['currency']} \n\n"        msg_out = bot.send_message(message.chat.id, msg)    elif message.text == 'Платежи':        menu.payment_menu(bot, message.chat.id)    elif message.text == 'Мобильный телефон':        msg = 'Введите номер телефона'        telegram_id = message.chat.id        payment_type = message.text        payment = Payment(telegram_id, payment_type)        user_payment[telegram_id] = payment        msg_out = bot.send_message(message.chat.id, msg)        bot.register_next_step_handler(msg_out, ask_phone_number)def ask_phone_number(message):    phone_number = message.text    if not phone_number.isdigit():        msg = 'Чувак ты не прав'        msg_out = bot.send_message(message.chat.id, msg)        bot.register_next_step_handler(msg_out, ask_phone_number)        return    telegram_id = message.chat.id    payment = user_payment[telegram_id]    payment.payment_detail = phone_number    msg = 'Введите сумму'    msg_out = bot.send_message(message.chat.id, msg)    bot.register_next_step_handler(msg_out, ask_phone_sum)def ask_phone_sum(message):    phone_sum = message.text    if not phone_sum.isdigit():        msg = 'Сумма должна быть целым числом'        msg_out = bot.send_message(message.chat.id, msg)        bot.register_next_step_handler(msg_out, ask_phone_sum)        return    telegram_id = message.chat.id    payment = user_payment[telegram_id]    payment.payment_sum = phone_sum    msg = f'Спасибо! \n пользователь {payment.telegram_id} \n {payment.payment_detail} \n{payment.payment_type} \n{payment.payment_sum}'    msg_out = bot.send_message(message.chat.id, msg)bot.polling()